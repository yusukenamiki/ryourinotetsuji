<%= render 'shared/header' %>
<%= render 'shared/flash_messages' %>

<div class="main-image"></div>

<div style="background-color: #ffffff; padding: 4.5rem 0;">
  <div class="text-center">
    <div class="mb-4 text-dark" style="font-size: 4.8rem; font-family: 'New Tegomin', serif;">
      料理のてつじ
    </div>
    <div class="mb-4">
      料理レシピの投稿・共有サービス
    </div>
  </div>
</div>





<div style="background-color: #f8f9fa; padding: 6rem 0;">
  <div class="text-center" style="font-size: 1.8rem; margin-bottom: 6rem;">
    料理のてつじではこんな事が可能です
  </div>
  <div class="description-oya text-center">
    <div class="description-ko px-5">
      <div class="mb-3" style="font-size: 4.8rem;">
        <i class="fas fa-search"></i>
      </div>
      <div class="mb-3">
        <strong>検索</strong>
      </div>
      <div style="font-size: 1.2rem;">
        レシピ一覧画面や検索バーなどからレシピを検索することが可能です。
      </div>
    </div>
    <div class="description-ko px-5">
      <div class="mb-3" style="font-size: 4.8rem; padding-left: 1.3rem;">
        </i><i class="far fa-edit"></i>
      </div>
      <div class="mb-3">
        <strong>投稿</strong>
      </div>
      <div style="font-size: 1.2rem;">
        レシピの投稿や他のユーザーのレシピにコメントを投稿することが可能です。
      </div>
    </div>
    <div class="description-ko px-5">
      <div class="mb-3" style="font-size: 4.8rem;">
        </i><i class="far fa-heart"></i>
      </div>
      <div class="mb-3">
        <strong>いいね</strong>
      </div>
      <div style="font-size: 1.2rem;">
        いいねしたレシピは、いいね一覧画面から確認することが可能です。いいねの数は人気レシピの順位に反映されます。
      </div>
    </div>
  </div>

  <% if user_signed_in? %>
  <% else %>
    <div class="text-center" style="margin-top: 6rem;">
      <%= link_to new_user_registration_path do %>
        <button type="button" class="btn btn-color01" style="width: 200px;">今すぐはじめる</button>
      <% end %>
    </div>
  <% end %>
</div>





<div style="background-color: #ffffff;">
  <div class="container p-5">
    <div class="wrapper d-flex align-items-center justify-content-between mb-5">
      <div class="text-dark font-weight-bold" style="font-size: 1.8rem;">
        新着レシピ
      </div>
      <%= link_to recipes_path do %>
        <div class="text-secondary">もっと見る<i class="fas fa-chevron-right pl-3"></i></div>
      <% end %>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 px-2">
      <%= render 'shared/recipes' %>
    </div>
  </div>
</div>





<div style="background-color: #f8f9fa;">
  <div class="container p-5">
    <div class="wrapper d-flex align-items-center justify-content-between mb-5">
      <div class="text-dark font-weight-bold" style="font-size: 1.8rem;">
        人気レシピ
      </div>
      <%= link_to recipes_path do %>
        <div class="text-secondary">もっと見る<i class="fas fa-chevron-right pl-3"></i></div>
      <% end %>
    </div>

    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 px-2 ranking">
      <% @recipes.each do |recipe| %>
        <div class="col px-1 ranking-li">
          <div class="card shadow-sm mx-2 mb-4">
            <div class="p-0">
              <%= link_to recipe_path(recipe) do %>
                <%= attachment_image_tag recipe, :image, width: '100%;', height: '300px;' %>
              <% end %>
            </div>

            <div class="card-body p-4">
              <div class="wrapper d-flex align-items-center">
                <div class="kotei40">
                  <%= link_to user_path(recipe.user.id) do %>
                    <%= attachment_image_tag recipe.user, :profile_image, fallback: "no-image.png", class: "user-icon40 rounded-circle" %>
                  <% end %>
                </div>
                <div class="kahen pl-4">
                  <div class="text-ellipsis1">
                    <%= link_to recipe_path(recipe), class:"link-title" do %>
                      <strong><%= recipe.title %></strong>
                    <% end %>
                  </div>
                </div>
              </div>

              <div class="text-ellipsis1 mt-4" style="font-size: 1.2rem;">
                <%= link_to user_path(recipe.user.id), class:"link" do %>
                  <%= recipe.user.username %>
                <% end %>
              </div>

              <div class="mt-3" style="font-size: 1.2rem;">
                <span><%= time_ago_in_words(recipe.updated_at) %></span>前
              </div>

              <div class="mt-3" style="width: 3rem; font-size: 1.2rem;">
                <% if user_signed_in? %>
                  <% if current_user.already_favorited?(recipe) %>
                    <%= link_to recipe_favorites_path(recipe), method: :delete do %>
                      <div class="wrapper heart-pink" data-toggle="tooltip" title="いいねを取り消す" data-placement="bottom">
                        <div>
                          <i class="fas fa-heart"></i>
                        </div>
                        <div class="ml-2">
                          <%= recipe.favorites.count %>
                        </div>
                      </div>
                    <% end %>
                  <% else %>
                    <%= link_to recipe_favorites_path(recipe), class:"link", method: :post do %>
                      <div class="wrapper heart-hover-color" data-toggle="tooltip" title="いいね" data-placement="bottom">
                        <div>
                          <i class="far fa-heart"></i>
                        </div>
                        <div class="ml-2">
                          <%= recipe.favorites.count %>
                        </div>
                      </div>
                    <% end %>
                  <% end %>
                <% else %>
                  <div class="wrapper">
                    <div>
                      <i class="far fa-heart"></i>
                    </div>
                    <div class="ml-2">
                      <%= recipe.favorites.count %>
                    </div>
                  </div>
                <% end %>
              </div>

            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>





<%= render 'shared/footer' %>
